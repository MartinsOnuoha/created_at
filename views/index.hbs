<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title itemprop="name">Created At - Check how old a repository is ğŸ‘´ğŸ¼</title>
  <meta property="og:title" content="Created At - Check how old a Github repository is ğŸ‘´ğŸ¼" />
  <meta name="twitter:title" content="Created At - Check how old a Github repository is ğŸ‘´ğŸ¼" />
  <meta itemprop="name" content="Created At - Check how old a Github repository is ğŸ‘´ğŸ¼" />
  <meta name="application-name" content="Created At - Check how old a Github repository is ğŸ‘´ğŸ¼" />
  <meta property="og:site_name" content="Created At - Check how old a Github repository is ğŸ‘´ğŸ¼" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Check how old a Github repository is ğŸ‘´ğŸ¼ and when it was created.">
  <meta name="description" content="Check how old a Github repository is ğŸ‘´ğŸ¼ and  when it was created." />
  <meta itemprop="description" content="Check how old a Github repository is ğŸ‘´ğŸ¼ and when it was created." />
  <meta property="og:description" content="Check how old a Github repository is ğŸ‘´ğŸ¼ and when it was created." />
  <meta name="twitter:description" content="Check how old a Github repository is ğŸ‘´ğŸ¼ and when it was created." />

  <base href="{{ host }}">
  <link rel="canonical" href="{{ host }}" itemprop="url" />
  <meta name="url" content="{{ host }}" />
  <meta name="twitter:url" content="{{ host }}" />
  <meta property="og:url" content="{{ host }}" />

  <meta itemprop="image" content="https://cdn.vox-cdn.com/thumbor/917zVksXwuBg1Er7p3EgJLm4myg=/0x0:4492x2000/1400x1400/filters:focal(1385x549:2103x1267):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/52156263/_Adam_s_Creation_Sistine_Chapel_ceiling__by_Michelangelo_JBU33cut.0.jpeg" />
  <meta property="og:image" content="https://cdn.vox-cdn.com/thumbor/917zVksXwuBg1Er7p3EgJLm4myg=/0x0:4492x2000/1400x1400/filters:focal(1385x549:2103x1267):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/52156263/_Adam_s_Creation_Sistine_Chapel_ceiling__by_Michelangelo_JBU33cut.0.jpeg" />
  <meta name="twitter:image" content="https://cdn.vox-cdn.com/thumbor/917zVksXwuBg1Er7p3EgJLm4myg=/0x0:4492x2000/1400x1400/filters:focal(1385x549:2103x1267):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/52156263/_Adam_s_Creation_Sistine_Chapel_ceiling__by_Michelangelo_JBU33cut.0.jpeg" />
  <meta name="twitter:image:src" content="https://cdn.vox-cdn.com/thumbor/917zVksXwuBg1Er7p3EgJLm4myg=/0x0:4492x2000/1400x1400/filters:focal(1385x549:2103x1267):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/52156263/_Adam_s_Creation_Sistine_Chapel_ceiling__by_Michelangelo_JBU33cut.0.jpeg" />

  <meta name="keywords" content="repository, github, age, check how old, how old is repository, view repository age, check repository age, check github repository age, see github repository age, how old is a repository, how old is github repository, " />

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QEGXPFMFX3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-QEGXPFMFX3');
  </script>

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Xanh+Mono&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="https://cdn.vox-cdn.com/thumbor/917zVksXwuBg1Er7p3EgJLm4myg=/0x0:4492x2000/1400x1400/filters:focal(1385x549:2103x1267):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/52156263/_Adam_s_Creation_Sistine_Chapel_ceiling__by_Michelangelo_JBU33cut.0.jpeg" type="image/x-icon">
  <link rel="stylesheet" href="styles/app.css">
  <link rel="stylesheet" href="styles/mobile.css">
  <title>Created At</title>
  <style>

  </style>
</head>
<body>
  <div class="container">
    <div class="image" id="image"></div>
    <div class="action">
      <h1>~ Created AT ~</h1>
      <p class="tagline">Discover when a repository was created</p>
      <div class="search">
        <input id="url" type="text" placeholder="Paste repository URL">
      </div>
      <div class="action-btn">
        <button onclick="fetchData()" class="btn">Show Me!</button>
      </div>

    </div>
  </div>

  <script>
    function fetchData() {

      // hide card
      // document.getElementById('card').style.display = 'none';
      const cardContainer = document.getElementById('image')
      const template = document.createElement('template');
      const card = document.getElementById('card');
      const url = document.getElementById('url').value.replace('.git', '')

      if (!url) {
        return false;
      }
      const pathArray = url.split('/');
      const path = `${pathArray[pathArray.length - 2]}/${pathArray[pathArray.length - 1]}`
      console.log(`https://api.github.com/repos/${path}`)

      if (card) {
        card.remove()
      }
      fetch(`http://localhost:3000/get-data?url=https://api.github.com/repos/${path}`)
        .then((response) => response.json())
        .then(data => {

          let value = `
            <div class="card" id="card">
              <div class="card-container">
                <div class="card-image">
                  <img class="repo_avatar" src="${data.avatar}" alt="">
                  <p style="margin-left: 10px;"><a href="${data.html_url}">${trunCate(data.full_name, 10)}</a></p>
                </div>
                <div class="date">${data.created_at}</div>
              </div>
              <div class="age">
                Created ${data.how_old === 0 ? 'This Year' : `${data.how_old} Years ago` }
              </div>
            </div>
          `;
          value = value.trim();
          template.innerHTML = value
          cardContainer.appendChild(template.content.firstChild)
        })
    }
    function trunCate(val, length) {
      if (val.length > length) {
        return `${val.substr(0, length)}...`
      }
      return val
    }
  </script>
</body>
</html>
